<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Have you ever tried blocking WhatsApp from your router? | Rukshan&#39;s Blog</title>
<meta name="keywords" content="Rants, WhatsApp, wordpress, Import 2024-04-25 23:03">
<meta name="description" content="In a previous post I wrote that I live in a part of the world that does not provide unlimited internet.">
<meta name="author" content="">
<link rel="canonical" href="https://ruky.me/have-you-ever-tried-blocking-whatsapp-you-probably-cant/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://ruky.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ruky.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ruky.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://ruky.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://ruky.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://ruky.me/have-you-ever-tried-blocking-whatsapp-you-probably-cant/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://ruky.me/have-you-ever-tried-blocking-whatsapp-you-probably-cant/">
  <meta property="og:site_name" content="Rukshan&#39;s Blog">
  <meta property="og:title" content="Have you ever tried blocking WhatsApp from your router?">
  <meta property="og:description" content="In a previous post I wrote that I live in a part of the world that does not provide unlimited internet.">
  <meta property="og:locale" content="en-US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-01-23T22:57:49+00:00">
    <meta property="article:modified_time" content="2021-01-23T22:57:49+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Have you ever tried blocking WhatsApp from your router?">
<meta name="twitter:description" content="In a previous post I wrote that I live in a part of the world that does not provide unlimited internet.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Post",
      "item": "https://ruky.me/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Have you ever tried blocking WhatsApp from your router?",
      "item": "https://ruky.me/have-you-ever-tried-blocking-whatsapp-you-probably-cant/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Have you ever tried blocking WhatsApp from your router?",
  "name": "Have you ever tried blocking WhatsApp from your router?",
  "description": "In a previous post I wrote that I live in a part of the world that does not provide unlimited internet.\n",
  "keywords": [
    "Rants", "WhatsApp", "wordpress", "Import 2024-04-25 23:03"
  ],
  "articleBody": "In a previous post I wrote that I live in a part of the world that does not provide unlimited internet.\nThis means data is valuable, and if I run out of data, I have to pay a premium amount to activate a data add-on which can be quite expensive. There is one router at our apartment, and we all share the data among ourselves, and we hope that we are all using in a fair manner without over spending on streaming, or downloads, in an unfair way.\nThe easiest way for anyone to do is use the nighttime data for their streaming and downloads, and leave to peak day time data for office and other important work. (Yes if you are reading this from USA, we have peak and off peak time data for home broadband)\nA detailed usage report provided by my ISP suggested to me that there is a WhatsApp addict in my apartment, who is spending large amount of data for WhatsApp video calls.\nSince I’m the person who is paying the internet bill, and I need data for more important work than making WhatsApp video calls, I wanted a way to stop people from spending my data in unnecessarily ways, and use their own mobile data if they have to make WhatsApp or any other video calls.\nSince I can’t go and ask from each and every individual whether they are spending too much time on WhatsApp video calls, I decided to block all WhatsApp communications at the router level.\nInitially I thought this would be a walk in the park, just log in to my router dashboard, and block the WhatsApp URL, IP addresses and ports. Just a two minute job.\nBut this lead me to rabbit hole that too more than several hours, and made me yield without finding a solution.\nGoogle search A search on Google shows that people have been asking for a way to block WhatsApp, going back to several years.\nThe first approach which I found in a StackOverflow answer was to block the domain c.whatsapp.net according to the answer, this is the domain which handshakes at initiation of the app. And according to the poster, if we can block this domain, we would be able to block initiation a connection to WhatsApp server, and therefore successfully block WhatsApp.\nI flagged the domain and tested, but to it did not prove to successfully block WhatsApp.\nSo I decided to search even further, another answer also posted on StackOverflow told me to block some ports, with TCP and UDP connections. These included TCP ports 5222, 5223, 5228 and 3478.\nI painstakingly blocked all upstream and downstream TCP and UDP connections from my router, hoping it would block WhatsApp. But that did not also proved to be effective.\nTrying to find an IP addresses There has to be a way to block WhatsApp right? So why can’t I find an IP address or list of IP addresses, that I can block from my router, and finally block WhatsApp for good?\nThere was one IP address range that I found in the same SO answer, 31.13.64.0/18.\nSo I decided to block the IP addresses, and tested to see if it works, but unfortunately that also did not seem to work.\nSo I did further digging, and came to the GitHub post, which showed a comprehensive list of domains and IP addresses, that according to the poster, should be able to successfully block WhatsApp, or most of the connections to WhatsApp.\nhttps://github.com/ukanth/afwall/wiki/HOWTO-blocking-WhatsApp\nThere it seems WhatsApp has multiple domains from c.whatsapp.net to c20.whatsapp.com and e.whatsapp.net to e20.whatsapp.com.\nAlso multiple IP ranges, and ports, but even though I tried all of them, none seemed to work. Why can’t I block a simple app from accessing though my router?\nI guess they may have changed their domains, or added more domains and IP addresses by now, since WhatsApp has grown in popularity since most of these answers were posted on different forums.\nWhatsApp will tell you their IPs, only if you pay It seems like WhatsApp shares there IP addresses only to network operators and if you pay them to do it.\nWhatsApp is currently providing special pricing campaign service for Mobile operators, the IP pool is only available for those operators. Please note that we have migrated the latest IP pools of WhatsApp to Facebook Mobile Partner Portal and the IP pool update process has been fully automated.\nhttps://www.whatsapp.com/cidr.txt\nSo there is no way for me to know what are the IP addresses and ports that I should block in order to prevent WhatsApp from using my network, without randomly blocking ports and IPs and breaking my access to internet.\nIt seems almost all the posts I found on the internet, the people who originally asked the question also did not find a clear way to block WhatsApp. So I guess it’s not just me.\nSo how would you block WhatsApp if you faced with a similar situation? If you want your employees to stop using WhatsApp or other IM service during their working hours?\nI’m left with no other option but to change my router password, so no one else can access internet via my router and my internet connection.\n",
  "wordCount" : "877",
  "inLanguage": "en",
  "datePublished": "2021-01-23T22:57:49Z",
  "dateModified": "2021-01-23T22:57:49Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://ruky.me/have-you-ever-tried-blocking-whatsapp-you-probably-cant/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rukshan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ruky.me/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://ruky.me/" accesskey="h" title="Rukshan&#39;s Blog (Alt + H)">Rukshan&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://ruky.me/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://ruky.me/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="https://ruky.me/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://ruky.me/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Have you ever tried blocking WhatsApp from your router?
    </h1>
    <div class="post-meta"><span title='2021-01-23 22:57:49 +0000 UTC'>January 23, 2021</span>

</div>
  </header> 
  <div class="post-content"><p>In a previous post I wrote that I live in a part of the world that <a href="https://ruky.me/sri-lanka-need-unlimited-internet-connections/">does not provide unlimited internet</a>.</p>
<p>This means data is valuable, and if I run out of data, I have to pay a premium amount to activate a data add-on which can be quite expensive. There is one router at our apartment, and we all share the data among ourselves, and we hope that we are all using in a fair manner without over spending on streaming, or downloads, in an unfair way.</p>
<p>The easiest way for anyone to do is use the nighttime data for their streaming and downloads, and leave to peak day time data for office and other important work. (Yes if you are reading this from USA, we have peak and off peak time data for home broadband)</p>
<p>A detailed usage report provided by my ISP suggested to me that there is a WhatsApp addict in my apartment, who is spending large amount of data for WhatsApp video calls.</p>
<p>Since I’m the person who is paying the internet bill, and I need data for more important work than making WhatsApp video calls, I wanted a way to stop people from spending my data in unnecessarily ways, and use their own mobile data if they have to make WhatsApp or any other video calls.</p>
<p>Since I can’t go and ask from each and every individual whether they are spending too much time on WhatsApp video calls, I decided to block all WhatsApp communications at the router level.</p>
<p>Initially I thought this would be a walk in the park, just log in to my router dashboard, and block the WhatsApp URL, IP addresses and ports. Just a two minute job.</p>
<p>But this lead me to rabbit hole that too more than several hours, and made me yield without finding a solution.</p>
<h2 id="google-search">Google search<a hidden class="anchor" aria-hidden="true" href="#google-search">#</a></h2>
<p>A search on Google shows that people have been asking for a way to block WhatsApp, going back to several years.</p>
<p>The first approach which I found in a StackOverflow answer was to block the domain <strong><em>c.whatsapp.net</em></strong> according to the answer, this is the domain which handshakes at initiation of the app. And according to the poster, if we can block this domain, we would be able to block initiation a connection to WhatsApp server, and therefore successfully block WhatsApp.</p>
<p>I flagged the domain and tested, but to it did not prove to successfully block WhatsApp.</p>
<p>So I decided to search even further, another <a href="https://security.stackexchange.com/questions/203475/how-to-block-whatsapp-traffic-in-tp-link-router">answer also posted on StackOverflow</a> told me to block some ports, with TCP and UDP connections. These included TCP ports 5222, 5223, 5228 and 3478.</p>
<p>I painstakingly blocked all upstream and downstream TCP and UDP connections from my router, hoping it would block WhatsApp. But that did not also proved to be effective.</p>
<h2 id="trying-to-find-an-ip-addresses">Trying to find an IP addresses<a hidden class="anchor" aria-hidden="true" href="#trying-to-find-an-ip-addresses">#</a></h2>
<p>There has to be a way to block WhatsApp right? So why can’t I find an IP address or list of IP addresses, that I can block from my router, and finally block WhatsApp for good?</p>
<p>There was one IP address range that I found in the same SO answer, 31.13.64.0/18.</p>
<p>So I decided to block the IP addresses, and tested to see if it works, but unfortunately that also did not seem to work.</p>
<p>So I did further digging, and came to the GitHub post, which showed a comprehensive list of domains and IP addresses, that according to the poster, should be able to successfully block WhatsApp, or most of the connections to WhatsApp.</p>
<p><a href="https://github.com/ukanth/afwall/wiki/HOWTO-blocking-WhatsApp">https://github.com/ukanth/afwall/wiki/HOWTO-blocking-WhatsApp</a></p>
<p>There it seems WhatsApp has multiple domains from c.whatsapp.net to c20.whatsapp.com and e.whatsapp.net to e20.whatsapp.com.</p>
<p>Also multiple IP ranges, and ports, but even though I tried all of them, none seemed to work. Why can’t I block a simple app from accessing though my router?</p>
<p>I guess they may have changed their domains, or added more domains and IP addresses by now, since WhatsApp has grown in popularity since most of these answers were posted on different forums.</p>
<h2 id="whatsapp-will-tell-you-their-ips-only-if-you-pay">WhatsApp will tell you their IPs, only if you pay<a hidden class="anchor" aria-hidden="true" href="#whatsapp-will-tell-you-their-ips-only-if-you-pay">#</a></h2>
<p>It seems like WhatsApp shares there IP addresses only to network operators and if you pay them to do it.</p>
<blockquote>
<p>WhatsApp is currently providing special pricing campaign service for Mobile operators, the IP pool is only available for those operators. Please note that we have migrated the latest IP pools of WhatsApp to Facebook Mobile Partner Portal and the IP pool update process has been fully automated.</p>
<p><a href="https://www.whatsapp.com/cidr.txt">https://www.whatsapp.com/cidr.txt</a></p>
</blockquote>
<p>So there is no way for me to know what are the IP addresses and ports that I should block in order to prevent WhatsApp from using my network, without randomly blocking ports and IPs and breaking my access to internet.</p>
<p>It seems almost all the posts I found on the internet, the people who originally asked the question also did not find a clear way to block WhatsApp. So I guess it’s not just me.</p>
<p>So how would you block WhatsApp if you faced with a similar situation? If you want your employees to stop using WhatsApp or other IM service during their working hours?</p>
<p>I’m left with no other option but to change my router password, so no one else can access internet via my router and my internet connection.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>2025</span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
